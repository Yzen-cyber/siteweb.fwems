// Base de données de connexion - Personnel réel uniquement
window.loginData = [
    // DIRECTION (2)
    {
        id: 1,
        nom: "Karl Pierce",
        email: "karl.pierce@ems.fw",
        passwordTemp: "KarlPierce2026!",
        role: "Direction",
        grade: "Directeur",
        mustChangePassword: true
    },
    {
        id: 2,
        nom: "Zak Carter",
        email: "zak.carter@ems.fw",
        passwordTemp: "ZakCarter2026!",
        role: "Direction",
        grade: "Directeur Adjoint",
        mustChangePassword: true
    },

    // SUPERVISION (5)
    {
        id: 3,
        nom: "Kahverengi Yildiz",
        email: "kahverengi.yildiz@ems.fw",
        passwordTemp: "Kahverengi2026!",
        role: "Supervision",
        grade: "Commander",
        mustChangePassword: true
    },
    {
        id: 4,
        nom: "Mike Mouk",
        email: "mike.mouk@ems.fw",
        passwordTemp: "MikeMouk2026!",
        role: "Supervision",
        grade: "Commander",
        mustChangePassword: true
    },
    {
        id: 5,
        nom: "Kader Yamaha",
        email: "kader.yamaha@ems.fw",
        passwordTemp: "KaderYamaha2026!",
        role: "Supervision",
        grade: "Senior Paramedic",
        mustChangePassword: true
    },

    // PERSONNEL MÉDICAL AVANCÉ (31)
    {
        id: 6,
        nom: "Tyron Fasol",
        email: "tyron.fasol@ems.fw",
        passwordTemp: "TyronFasol2026!",
        role: "AdvancedMedecine",
        grade: "Junior Paramedic",
        mustChangePassword: true
    },
    {
        id: 7,
        nom: "Niya Wahid",
        email: "niya.wahid@ems.fw",
        passwordTemp: "NiyaWahid2026!",
        role: "AdvancedMedecine",
        grade: "Junior Paramedic",
        mustChangePassword: true
    },
    {
        id: 8,
        nom: "Mariposa Dos-sontos",
        email: "mariposa.dossontos@ems.fw",
        passwordTemp: "Mariposa2026!",
        role: "AdvancedMedecine",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 9,
        nom: "Walker Johnson",
        email: "walker.johnson@ems.fw",
        passwordTemp: "WalkerJohnson2026!",
        role: "AdvancedMedecine",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 10,
        nom: "Osman Sahin",
        email: "osman.sahin@ems.fw",
        passwordTemp: "OsmanSahin2026!",
        role: "AdvancedMedecine",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 11,
        nom: "Dustin Jones",
        email: "dustin.jones@ems.fw",
        passwordTemp: "DustinJones2026!",
        role: "AdvancedMedecine",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 12,
        nom: "Dash Wild",
        email: "dash.wild@ems.fw",
        passwordTemp: "DashWild2026!",
        role: "BasicMedecine",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 13,
        nom: "Nina Périphérique",
        email: "nina.peripherique@ems.fw",
        passwordTemp: "NinaPeripherique2026!",
        role: "BasicMedecine",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 14,
        nom: "Yanis Bamba",
        email: "yanis.bamba@ems.fw",
        passwordTemp: "YanisBamba2026!",
        role: "BasicMedecine",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 15,
        nom: "Ali Chorba",
        email: "ali.chorba@ems.fw",
        passwordTemp: "AliChorba2026!",
        role: "BasicMedecine",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 16,
        nom: "Kaïs Marshall",
        email: "kais.marshall@ems.fw",
        passwordTemp: "KaisMarshall2026!",
        role: "BasicMedecine",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 17,
        nom: "Maxime Rak",
        email: "maxime.rak@ems.fw",
        passwordTemp: "MaximeRak2026!",
        role: "BasicMedecine",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 18,
        nom: "Xenia Eliah",
        email: "xenia.eliah@ems.fw",
        passwordTemp: "XeniaEliah2026!",
        role: "BasicMedecine",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 19,
        nom: "Yassine Zerouni",
        email: "yassine.zerouni@ems.fw",
        passwordTemp: "YassineZerouni2026!",
        role: "BasicMedecine",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 20,
        nom: "Miguel Diaz",
        email: "miguel.diaz@ems.fw",
        passwordTemp: "MiguelDiaz2026!",
        role: "BasicMedecine",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 21,
        nom: "Nessayem Bensalah",
        email: "nessayem.bensalah@ems.fw",
        passwordTemp: "NessayemBensalah2026!",
        role: "BasicMedecine",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 22,
        nom: "Brams Sko",
        email: "brams.sko@ems.fw",
        passwordTemp: "BramsSko2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 23,
        nom: "Friandises Saydou",
        email: "friandises.saydou@ems.fw",
        passwordTemp: "FriandisesSaydou2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 24,
        nom: "James Wood",
        email: "james.wood@ems.fw",
        passwordTemp: "JamesWood2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 25,
        nom: "Sofyane Anderson",
        email: "sofyane.anderson@ems.fw",
        passwordTemp: "SofyaneAnderson2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 26,
        nom: "Guzman Ruiz",
        email: "guzman.ruiz@ems.fw",
        passwordTemp: "GuzmanRuiz2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 27,
        nom: "Horacio Montero",
        email: "horacio.montero@ems.fw",
        passwordTemp: "HoracioMontero2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 28,
        nom: "Bakhaw Brooks",
        email: "bakhaw.brooks@ems.fw",
        passwordTemp: "BakhawBrooks2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 29,
        nom: "Daniels Brooks",
        email: "daniels.brooks@ems.fw",
        passwordTemp: "DanielsBrooks2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 30,
        nom: "Jessie Perez",
        email: "jessie.perez@ems.fw",
        passwordTemp: "JessiePerez2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 31,
        nom: "Ayden Baraoui",
        email: "ayden.baraoui@ems.fw",
        passwordTemp: "AydenBaraoui2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 32,
        nom: "Derya Gaviria",
        email: "derya.gaviria@ems.fw",
        passwordTemp: "DeryaGaviria2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 33,
        nom: "Marco Martinez",
        email: "marco.martinez@ems.fw",
        passwordTemp: "MarcoMartinez2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 34,
        nom: "William News",
        email: "william.news@ems.fw",
        passwordTemp: "WilliamNews2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 35,
        nom: "Angelina Hilton",
        email: "angelina.hilton@ems.fw",
        passwordTemp: "AngelinaHilton2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 36,
        nom: "Swan Lee",
        email: "swan.lee@ems.fw",
        passwordTemp: "SwanLee2026!",
        role: "BasicMedecine",
        grade: "EMR",
        mustChangePassword: true
    }
];

// Fonction pour obtenir un utilisateur par email
function getLoginByEmail(email) {
    return window.loginData.find(user => user.email.toLowerCase() === email.toLowerCase());
}

// Fonction pour vérifier les credentials
function verifyLogin(email, password) {
    const user = getLoginByEmail(email);
    if (!user) return { valid: false, message: "Email non trouvé" };
    
    // Vérifier le mot de passe (d'abord le MDP temporaire, puis le MDP permanent s'il a changé)
    const savedUser = JSON.parse(localStorage.getItem('currentUser'));
    if (savedUser && savedUser.email === email && savedUser.password) {
        if (password === savedUser.password) {
            return { valid: true, user: savedUser, mustChangePassword: false };
        }
    }
    
    if (password === user.passwordTemp) {
        return { valid: true, user: user, mustChangePassword: user.mustChangePassword };
    }
    
    return { valid: false, message: "Mot de passe incorrect" };
}

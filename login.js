// Base de données de connexion - Tous les utilisateurs avec credentials temporaires
window.loginData = [
    // DIRECTION (2)
    {
        id: 1,
        nom: "Karl Pierce",
        email: "karl.pierce@ems.fw",
        passwordTemp: "KarlPierce2026!",
        role: "Direction",
        grade: "Directeur",
        mustChangePassword: true
    },
    {
        id: 2,
        nom: "Zak Carter",
        email: "zak.carter@ems.fw",
        passwordTemp: "ZakCarter2026!",
        role: "Direction",
        grade: "Directeur Adjoint",
        mustChangePassword: true
    },

    // SUPERVISION (5)
    {
        id: 3,
        nom: "Kahverengi Yildiz",
        email: "kahverengi.yildiz@ems.fw",
        passwordTemp: "Kahverengi2026!",
        role: "Supervision",
        grade: "Commander",
        mustChangePassword: true
    },
    {
        id: 4,
        nom: "Mike Mouk",
        email: "mike.mouk@ems.fw",
        passwordTemp: "MikeMouk2026!",
        role: "Supervision",
        grade: "Commander",
        mustChangePassword: true
    },
    {
        id: 5,
        nom: "Kader Yamaha",
        email: "kader.yamaha@ems.fw",
        passwordTemp: "KaderYamaha2026!",
        role: "Supervision",
        grade: "Senior Paramedic",
        mustChangePassword: true
    },
    {
        id: 6,
        nom: "Tyron Fasol",
        email: "tyron.fasol@ems.fw",
        passwordTemp: "TyronFasol2026!",
        role: "Supervision",
        grade: "Senior Paramedic",
        mustChangePassword: true
    },
    {
        id: 7,
        nom: "Niya Wahid",
        email: "niya.wahid@ems.fw",
        passwordTemp: "NiyaWahid2026!",
        role: "Supervision",
        grade: "Master EMT",
        mustChangePassword: true
    },

    // EMS (29)
    {
        id: 8,
        nom: "Sarah Johnson",
        email: "sarah.johnson@ems.fw",
        passwordTemp: "SarahJohnson2026!",
        role: "EMS",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 9,
        nom: "David Martinez",
        email: "david.martinez@ems.fw",
        passwordTemp: "DavidMartinez2026!",
        role: "EMS",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 10,
        nom: "Emily Rodriguez",
        email: "emily.rodriguez@ems.fw",
        passwordTemp: "EmilyRodriguez2026!",
        role: "EMS",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 11,
        nom: "James Wilson",
        email: "james.wilson@ems.fw",
        passwordTemp: "JamesWilson2026!",
        role: "EMS",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 12,
        nom: "Lisa Anderson",
        email: "lisa.anderson@ems.fw",
        passwordTemp: "LisaAnderson2026!",
        role: "EMS",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 13,
        nom: "Michael Taylor",
        email: "michael.taylor@ems.fw",
        passwordTemp: "MichaelTaylor2026!",
        role: "EMS",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 14,
        nom: "Jennifer Brown",
        email: "jennifer.brown@ems.fw",
        passwordTemp: "JenniferBrown2026!",
        role: "EMS",
        grade: "Infirmier",
        mustChangePassword: true
    },
    {
        id: 15,
        nom: "Robert Garcia",
        email: "robert.garcia@ems.fw",
        passwordTemp: "RobertGarcia2026!",
        role: "EMS",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 16,
        nom: "Patricia Lee",
        email: "patricia.lee@ems.fw",
        passwordTemp: "PatriciaLee2026!",
        role: "EMS",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 17,
        nom: "Christopher White",
        email: "christopher.white@ems.fw",
        passwordTemp: "ChristopherWhite2026!",
        role: "EMS",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 18,
        nom: "Nancy Harris",
        email: "nancy.harris@ems.fw",
        passwordTemp: "NancyHarris2026!",
        role: "EMS",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 19,
        nom: "Daniel Clark",
        email: "daniel.clark@ems.fw",
        passwordTemp: "DanielClark2026!",
        role: "EMS",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 20,
        nom: "Susan Lewis",
        email: "susan.lewis@ems.fw",
        passwordTemp: "SusanLewis2026!",
        role: "EMS",
        grade: "Infirmier",
        mustChangePassword: true
    },
    {
        id: 21,
        nom: "Paul Walker",
        email: "paul.walker@ems.fw",
        passwordTemp: "PaulWalker2026!",
        role: "EMS",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 22,
        nom: "Linda Young",
        email: "linda.young@ems.fw",
        passwordTemp: "LindaYoung2026!",
        role: "EMS",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 23,
        nom: "Andrew King",
        email: "andrew.king@ems.fw",
        passwordTemp: "AndrewKing2026!",
        role: "EMS",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 24,
        nom: "Karen Wright",
        email: "karen.wright@ems.fw",
        passwordTemp: "KarenWright2026!",
        role: "EMS",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 25,
        nom: "Thomas Lopez",
        email: "thomas.lopez@ems.fw",
        passwordTemp: "ThomasLopez2026!",
        role: "EMS",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 26,
        nom: "Betty Hall",
        email: "betty.hall@ems.fw",
        passwordTemp: "BettyHall2026!",
        role: "EMS",
        grade: "Infirmier",
        mustChangePassword: true
    },
    {
        id: 27,
        nom: "Charles Allen",
        email: "charles.allen@ems.fw",
        passwordTemp: "CharlesAllen2026!",
        role: "EMS",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 28,
        nom: "Margaret Scott",
        email: "margaret.scott@ems.fw",
        passwordTemp: "MargaretScott2026!",
        role: "EMS",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 29,
        nom: "Mark Green",
        email: "mark.green@ems.fw",
        passwordTemp: "MarkGreen2026!",
        role: "EMS",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 30,
        nom: "Dorothy Adams",
        email: "dorothy.adams@ems.fw",
        passwordTemp: "DorothyAdams2026!",
        role: "EMS",
        grade: "EMR",
        mustChangePassword: true
    },
    {
        id: 31,
        nom: "Steven Nelson",
        email: "steven.nelson@ems.fw",
        passwordTemp: "StevenNelson2026!",
        role: "EMS",
        grade: "EMT Advanced",
        mustChangePassword: true
    },
    {
        id: 32,
        nom: "Ashley Carter",
        email: "ashley.carter@ems.fw",
        passwordTemp: "AshleyCarter2026!",
        role: "EMS",
        grade: "Infirmier",
        mustChangePassword: true
    },
    {
        id: 33,
        nom: "Edward Mitchell",
        email: "edward.mitchell@ems.fw",
        passwordTemp: "EdwardMitchell2026!",
        role: "EMS",
        grade: "EMT Intermédiaire",
        mustChangePassword: true
    },
    {
        id: 34,
        nom: "Cynthia Roberts",
        email: "cynthia.roberts@ems.fw",
        passwordTemp: "CynthiaRoberts2026!",
        role: "EMS",
        grade: "EMT Basic",
        mustChangePassword: true
    },
    {
        id: 35,
        nom: "Ryan Phillips",
        email: "ryan.phillips@ems.fw",
        passwordTemp: "RyanPhillips2026!",
        role: "EMS",
        grade: "Master EMT",
        mustChangePassword: true
    },
    {
        id: 36,
        nom: "Pamela Campbell",
        email: "pamela.campbell@ems.fw",
        passwordTemp: "PamelaCampbell2026!",
        role: "EMS",
        grade: "EMR",
        mustChangePassword: true
    }
];

// Fonction pour obtenir un utilisateur par email
function getLoginByEmail(email) {
    return window.loginData.find(user => user.email.toLowerCase() === email.toLowerCase());
}

// Fonction pour vérifier les credentials
function verifyLogin(email, password) {
    const user = getLoginByEmail(email);
    if (!user) return { valid: false, message: "Email non trouvé" };
    
    // Vérifier le mot de passe (d'abord le MDP temporaire, puis le MDP permanent s'il a changé)
    const savedUser = JSON.parse(localStorage.getItem('currentUser'));
    if (savedUser && savedUser.email === email && savedUser.password) {
        if (password === savedUser.password) {
            return { valid: true, user: savedUser, mustChangePassword: false };
        }
    }
    
    if (password === user.passwordTemp) {
        return { valid: true, user: user, mustChangePassword: user.mustChangePassword };
    }
    
    return { valid: false, message: "Mot de passe incorrect" };
}
